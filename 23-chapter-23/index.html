
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../22-chapter-22/">
      
      
        <link rel="next" href="../24-chapter-24/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Chapter 3.4: Subtypes & Modifiers - Procedural Nuance for Glyphs (C#) - Mastering Sigilborne: Building a Generational Ninja Life Simulator</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="sky" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-34-subtypes-modifiers-procedural-nuance-for-glyphs-c" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Mastering Sigilborne: Building a Generational Ninja Life Simulator" class="md-header__button md-logo" aria-label="Mastering Sigilborne: Building a Generational Ninja Life Simulator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mastering Sigilborne: Building a Generational Ninja Life Simulator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 3.4: Subtypes & Modifiers - Procedural Nuance for Glyphs (C#)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mastering Sigilborne: Building a Generational Ninja Life Simulator" class="md-nav__button md-logo" aria-label="Mastering Sigilborne: Building a Generational Ninja Life Simulator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Mastering Sigilborne: Building a Generational Ninja Life Simulator
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-chapter-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.1: Project Setup for Godot 4.5 with C#
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-chapter-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.2: The Brain (C#) - Headless Simulation Layer
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-chapter-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.3: The Body (GDScript) - Reactive Presentation Layer
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-chapter-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.4: Directory Structure - Enforcing Separation of Concerns
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-chapter-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.5: Entity Model - Lightweight ECS-lite in C#
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-chapter-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.6: Component Architecture - Composition over Inheritance
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-chapter-7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.7: Job System & Concurrency - Multithreaded Processing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-chapter-8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.8: Thread Safety - Command Buffers & Double Buffering
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-chapter-9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.9: Scene Composition - Standardizing Godot Scenes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-chapter-10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.10: Naming Conventions & Scene Interfaces
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-chapter-11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.11: Animation Event Protocol - Syncing Brain & Body
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-chapter-12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.12: Interop Layer - C# to GDScript Communication
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../13-chapter-13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.13: Global State Management - Data Ownership
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../14-chapter-14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.14: Debugging Tools - Console & State Inspector
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../15-chapter-15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1.15: Main Loop Execution Order - Tick vs. Frame
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../16-chapter-16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2.1: Input Manager - Capturing Raw Input (GDScript)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../17-chapter-17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2.2: Standard Movement Logic - Velocity & Friction (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../18-chapter-18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2.3: Shift-Sliding Mechanic - Direction Lock (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../19-chapter-19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2.4: Physics Layer - Hybrid Movement Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../20-chapter-20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.1: Glyph Database - Concepts vs. Symbols (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../21-chapter-21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.2: Glyph Discovery System - Player Knowledge State (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../22-chapter-22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.3: Glyph Experimentation - Trial & Error Casting (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.4: Subtypes & Modifiers - Procedural Nuance for Glyphs (C#)
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.4: Subtypes & Modifiers - Procedural Nuance for Glyphs (C#)
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#chapter-34-subtypes-modifiers-procedural-nuance-for-glyphs-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chapter 3.4: Subtypes &amp; Modifiers - Procedural Nuance for Glyphs (C#)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chapter 3.4: Subtypes &amp; Modifiers - Procedural Nuance for Glyphs (C#)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-the-role-of-subtypes-in-dynamic-magic" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. The Role of Subtypes in Dynamic Magic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-defining-glyphsubtype-and-glyphmodifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Defining GlyphSubtype and GlyphModifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-enhancing-worldglyphdefinition-with-subtypes-and-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Enhancing WorldGlyphDefinition with Subtypes and Modifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-enhancing-worldglyphmap-to-generate-subtypes-and-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Enhancing WorldGlyphMap to Generate Subtypes and Modifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-testing-subtype-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Testing Subtype Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../24-chapter-24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3.5: Glyph Acquisition - Teachers & Scrolls (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../25-chapter-25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4.1: Input Buffer - Storing Glyph Sequences (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../26-chapter-26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4.2: Combo Resolver - Trie Structure for Spell Detection (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../27-chapter-27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4.3: Spell Data Architecture - Data-Driven Definitions (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../28-chapter-28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4.4: Casting State Machine - Player Casting Flow (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../29-chapter-29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4.5: Visual Feedback - Particles & Animations (GDScript)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../30-chapter-30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.1: Biological Simulation - The Bio-Tick (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../31-chapter-31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.2: Core Stats (Struct)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../32-chapter-32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.3: Metabolism System - Dynamic Decay Rates (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../33-chapter-33/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.4: Weather & Environment - Global Environmental State (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../34-chapter-34/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.5: Damage & Recovery Pipeline - Wounds & Status Effects (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../35-chapter-35/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.6: Status Effect Data - Definition vs. Instance (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../36-chapter-36/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.7: Recovery Logic - Health, Stamina, Chakra Regeneration (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../37-chapter-37/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5.8: Weather & Environment - Global Environmental State (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../38-chapter-38/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.1: Physics Layer - Hitbox & Hurtbox Detection (GDScript)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../39-chapter-39/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.2: The Math Layer - Damage Calculator (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../40-chapter-40/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.3: Equipment & Inventory - Inventory Data Structure (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../41-chapter-41/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.4: Equipment Logic - Recalculating Stats (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../42-chapter-42/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.5: World Boss Mechanics - Multi-Part Entities (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../43-chapter-43/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6.6: Titan AI State - Specialized State Machine (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../44-chapter-44/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.1: Perception System - Spatial Hashing (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../45-chapter-45/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.2: The Senses - Vision, Hearing & Chakra Sense (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../46-chapter-46/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.3: Stealth Mechanics - Visibility & Detection Meter (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../47-chapter-47/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.4: Decision Making: Utility AI (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../48-chapter-48/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.5: Ecology Simulation - Virtual Agents (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../49-chapter-49/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7.6: Spawning & Despawning - Hydration/Dehydration (Brain & Body)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../50-chapter-50/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.1: Faction System - The Relationship Graph (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../51-chapter-51/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.2: The Simulation Clock - Game Time & Load Balancing (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../52-chapter-52/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.3: Market Simulation - Supply & Demand (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../53-chapter-53/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.4: Trade Routes - Caravans as Arteries (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../54-chapter-54/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.5: Crime & Justice - The Heat System (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../55-chapter-55/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8.6: Bounty & Punishment - Escalation & Consequences (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../56-chapter-56/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9.1: Ritual System - Pattern Matching & Execution (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../57-chapter-57/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9.2: Seals & Locks - Logical Locks (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../58-chapter-58/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9.3: Ritual System - Simple, Advanced & Forbidden (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../59-chapter-59/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9.4: Forbidden Contracts & Spirit Contracts (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../60-chapter-60/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9.5: Corruption Pacts & Multi-Life Persistence of Rituals (C#)
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#chapter-34-subtypes-modifiers-procedural-nuance-for-glyphs-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chapter 3.4: Subtypes &amp; Modifiers - Procedural Nuance for Glyphs (C#)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chapter 3.4: Subtypes &amp; Modifiers - Procedural Nuance for Glyphs (C#)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-the-role-of-subtypes-in-dynamic-magic" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. The Role of Subtypes in Dynamic Magic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-defining-glyphsubtype-and-glyphmodifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Defining GlyphSubtype and GlyphModifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-enhancing-worldglyphdefinition-with-subtypes-and-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Enhancing WorldGlyphDefinition with Subtypes and Modifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-enhancing-worldglyphmap-to-generate-subtypes-and-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Enhancing WorldGlyphMap to Generate Subtypes and Modifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-testing-subtype-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Testing Subtype Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Chapter 3.4: Subtypes & Modifiers - Procedural Nuance for Glyphs (C#)</h1>

<h2 id="chapter-34-subtypes-modifiers-procedural-nuance-for-glyphs-c">Chapter 3.4: Subtypes &amp; Modifiers - Procedural Nuance for Glyphs (C#)</h2>
<p>Our glyph system currently maps a <code>GlyphSymbol</code> to a <code>GlyphConcept</code>. However, the GDD (B01.3) specifies that "each glyph's actual effect â€” its â€œmeaningâ€  â€” is generated uniquely per world." This means a <code>Bloom</code> concept might be "toxic bloom" in one world and "healing growth" in another. This chapter implements <strong>Subtypes &amp; Modifiers</strong>, adding procedural nuance to each <code>WorldGlyphDefinition</code> to define these world-specific behaviors, as outlined in TDD 15.4.</p>
<h3 id="1-the-role-of-subtypes-in-dynamic-magic">1. The Role of Subtypes in Dynamic Magic</h3>
<p>Subtypes are crucial for Sigilborne's infinite replayability and emergent world identity. They provide the "flavor and nuance" (GDD B02.4) to a glyph's core mechanical archetype.</p>
<ul>
<li><strong>Core Concept</strong>: <code>Bloom</code> (stable, universal mechanical archetype).</li>
<li><strong>World-Specific Subtype</strong>: <code>Toxic Bloom</code> vs. <code>Healing Bloom</code> vs. <code>Spore Cloud</code>.</li>
<li><strong>Modifiers</strong>: Numerical parameters that define the subtype's behavior (e.g., <code>damage_multiplier</code>, <code>healing_amount</code>, <code>duration</code>).</li>
</ul>
<p>These subtypes depend on world history, biomes, anomalies, and clan traditions, ensuring every world feels like a coherent magical language.</p>
<h3 id="2-defining-glyphsubtype-and-glyphmodifiers">2. Defining <code>GlyphSubtype</code> and <code>GlyphModifiers</code></h3>
<p>We need a way to define the specific behavior of a glyph's subtype. This will involve a unique ID for the subtype and a collection of numerical modifiers.</p>
<ol>
<li>Open <code>res://_Brain/Systems/Magic/GlyphConcepts.cs</code> and add <code>GlyphSubtype</code> and <code>GlyphModifierType</code> enums:</li>
</ol>
<pre><code class="language-csharp">// _Brain/Systems/Magic/GlyphConcepts.cs
using System;
using System.Collections.Generic; // For Dictionary&lt;TKey, TValue&gt;

namespace Sigilborne.Systems.Magic
{
    // ... (GlyphConcept enum) ...
    // ... (GlyphKnowledgeState enum) ...
    // ... (GlyphConceptExtensions class) ...

    /// &lt;summary&gt;
    /// Represents the world-specific behavior variant of a GlyphConcept.
    /// (GDD B01.3, TDD 15.4)
    /// &lt;/summary&gt;
    public enum GlyphSubtype
    {
        None,           // Default or invalid subtype
        Basic,          // A generic, balanced version of the concept (fallback)

        // Bloom Subtypes
        ToxicBloom,     // Damages, spreads poison
        HealingGrowth,  // Heals, grows protective flora
        SporeCloud,     // Creates a cloud, obscures vision

        // Veil Subtypes
        HeatMirage,     // Creates heat haze, blurs vision
        ColdMistVeil,   // Creates cold fog, slows movement
        ShadowBlend,    // Deepens shadows, enhances stealth

        // Pulse Subtypes
        Shockwave,      // Pushes entities, stuns briefly
        VibrationBurst, // Damages in area, disorients
        ChakraBeam,     // Focused damage, high penetration

        // ... Add more subtypes for other concepts as needed ...
    }

    /// &lt;summary&gt;
    /// Defines the types of numerical modifiers that a glyph subtype can have.
    /// (TDD 15.4)
    /// &lt;/summary&gt;
    public enum GlyphModifierType
    {
        None,
        DamageMultiplier,
        HealingAmount,
        Range,
        Duration,
        Radius,
        Speed,
        StabilityCost,
        ResidueGeneration,
        // Add more as needed for specific effects
    }
}
</code></pre>
<h3 id="3-enhancing-worldglyphdefinition-with-subtypes-and-modifiers">3. Enhancing <code>WorldGlyphDefinition</code> with Subtypes and Modifiers</h3>
<p>Now, we'll update our <code>WorldGlyphDefinition</code> struct to include a <code>GlyphSubtype</code> and a dictionary of <code>GlyphModifiers</code>.</p>
<p>Open <code>res://_Brain/Systems/Magic/WorldGlyphMap.cs</code> and modify <code>WorldGlyphDefinition</code> and its constructor:</p>
<pre><code class="language-csharp">// _Brain/Systems/Magic/WorldGlyphMap.cs
using Godot;
using System;
using System.Collections.Generic;
using System.Linq;

namespace Sigilborne.Systems.Magic
{
    /// &lt;summary&gt;
    /// Represents a single glyph definition for a specific world, mapping a visual symbol to a mechanical concept.
    /// Now includes world-specific subtype and modifiers.
    /// (GDD B01.3, TDD 15.4)
    /// &lt;/summary&gt;
    public struct WorldGlyphDefinition
    {
        public string SymbolID;
        public GlyphConcept Concept;
        public GlyphSubtype Subtype; // New: World-specific behavior variant
        public Dictionary&lt;GlyphModifierType, float&gt; Modifiers; // New: Numerical parameters for the subtype

        public WorldGlyphDefinition(string symbolId, GlyphConcept concept, GlyphSubtype subtype = GlyphSubtype.Basic, Dictionary&lt;GlyphModifierType, float&gt; modifiers = null)
        {
            SymbolID = symbolId;
            Concept = concept;
            Subtype = subtype;
            Modifiers = modifiers ?? new Dictionary&lt;GlyphModifierType, float&gt;(); // Initialize if null
        }

        public override string ToString()
        {
            // Include Subtype and Modifiers in the string representation
            string modifierString = string.Join(&quot;, &quot;, Modifiers.Select(kv =&gt; $&quot;{kv.Key}: {kv.Value:F1}&quot;));
            return $&quot;Symbol: '{SymbolID}' -&gt; Concept: {Concept}, Subtype: {Subtype} (Mods: {modifierString})&quot;;
        }
    }

    // ... (WorldGlyphMap class) ...
}
</code></pre>
<h3 id="4-enhancing-worldglyphmap-to-generate-subtypes-and-modifiers">4. Enhancing <code>WorldGlyphMap</code> to Generate Subtypes and Modifiers</h3>
<p>The <code>GenerateWorldGlyphMap</code> method needs to be updated to:
1.  Assign a random <code>GlyphSubtype</code> to each <code>WorldGlyphDefinition</code> based on its <code>GlyphConcept</code>.
2.  Generate <code>GlyphModifiers</code> for that subtype.</p>
<p>This will involve creating a helper method to get possible subtypes and their base modifiers for each concept.</p>
<ol>
<li>Open <code>res://_Brain/Systems/Magic/WorldGlyphMap.cs</code> and add a new helper class for Subtype Data (within the <code>Sigilborne.Systems.Magic</code> namespace, perhaps in a new file <code>GlyphSubtypeData.cs</code> or at the bottom of <code>WorldGlyphMap.cs</code>). For now, let's keep it in <code>WorldGlyphMap.cs</code> for simplicity.</li>
</ol>
<pre><code class="language-csharp">// _Brain/Systems/Magic/WorldGlyphMap.cs
using Godot;
using System;
using System.Collections.Generic;
using System.Linq;

namespace Sigilborne.Systems.Magic
{
    // ... (WorldGlyphDefinition struct) ...

    /// &lt;summary&gt;
    /// Helper class to store static definitions of GlyphSubtypes and their base modifiers.
    /// This is a static lookup, not procedurally generated. The *assignment* is procedural.
    /// &lt;/summary&gt;
    public static class GlyphSubtypeData
    {
        private static Dictionary&lt;GlyphConcept, List&lt;GlyphSubtype&gt;&gt; _conceptToSubtypes = new Dictionary&lt;GlyphConcept, List&lt;GlyphSubtype&gt;&gt;();
        private static Dictionary&lt;GlyphSubtype, Dictionary&lt;GlyphModifierType, float&gt;&gt; _subtypeBaseModifiers = new Dictionary&lt;GlyphSubtype, Dictionary&lt;GlyphModifierType, float&gt;&gt;();

        static GlyphSubtypeData() // Static constructor to initialize data once
        {
            // --- Map Concepts to Possible Subtypes ---
            _conceptToSubtypes.Add(GlyphConcept.Bloom, new List&lt;GlyphSubtype&gt; { GlyphSubtype.ToxicBloom, GlyphSubtype.HealingGrowth, GlyphSubtype.SporeCloud });
            _conceptToSubtypes.Add(GlyphConcept.Veil, new List&lt;GlyphSubtype&gt; { GlyphSubtype.HeatMirage, GlyphSubtype.ColdMistVeil, GlyphSubtype.ShadowBlend });
            _conceptToSubtypes.Add(GlyphConcept.Pulse, new List&lt;GlyphSubtype&gt; { GlyphSubtype.Shockwave, GlyphSubtype.VibrationBurst, GlyphSubtype.ChakraBeam });
            // Add mappings for other concepts as they get subtypes

            // --- Define Base Modifiers for Each Subtype ---
            _subtypeBaseModifiers.Add(GlyphSubtype.Basic, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.DamageMultiplier, 1.0f }, { GlyphModifierType.Range, 100f } });

            _subtypeBaseModifiers.Add(GlyphSubtype.ToxicBloom, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.DamageMultiplier, 1.2f }, { GlyphModifierType.Duration, 5.0f }, { GlyphModifierType.Radius, 50f } });
            _subtypeBaseModifiers.Add(GlyphSubtype.HealingGrowth, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.HealingAmount, 15.0f }, { GlyphModifierType.Duration, 3.0f }, { GlyphModifierType.Radius, 40f } });
            _subtypeBaseModifiers.Add(GlyphSubtype.SporeCloud, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.Duration, 8.0f }, { GlyphModifierType.Radius, 70f } });

            _subtypeBaseModifiers.Add(GlyphSubtype.HeatMirage, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.Duration, 10.0f }, { GlyphModifierType.StabilityCost, 0.1f } });
            _subtypeBaseModifiers.Add(GlyphSubtype.ColdMistVeil, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.Duration, 7.0f }, { GlyphModifierType.Speed, 0.7f } }); // Speed modifier for affected entities
            _subtypeBaseModifiers.Add(GlyphSubtype.ShadowBlend, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.Duration, 12.0f }, { GlyphModifierType.StabilityCost, 0.05f } });

            _subtypeBaseModifiers.Add(GlyphSubtype.Shockwave, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.DamageMultiplier, 0.8f }, { GlyphModifierType.Radius, 80f }, { GlyphModifierType.Speed, 0.5f } }); // Pushes, slows
            _subtypeBaseModifiers.Add(GlyphSubtype.VibrationBurst, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.DamageMultiplier, 1.1f }, { GlyphModifierType.Radius, 40f }, { GlyphModifierType.Duration, 2.0f } }); // Disorient duration
            _subtypeBaseModifiers.Add(GlyphSubtype.ChakraBeam, new Dictionary&lt;GlyphModifierType, float&gt; { { GlyphModifierType.DamageMultiplier, 1.5f }, { GlyphModifierType.Range, 200f }, { GlyphModifierType.StabilityCost, 0.2f } });
        }

        public static List&lt;GlyphSubtype&gt; GetSubtypesForConcept(GlyphConcept concept)
        {
            if (_conceptToSubtypes.TryGetValue(concept, out List&lt;GlyphSubtype&gt; subtypes))
            {
                return new List&lt;GlyphSubtype&gt;(subtypes); // Return a copy
            }
            return new List&lt;GlyphSubtype&gt; { GlyphSubtype.Basic }; // Fallback
        }

        public static Dictionary&lt;GlyphModifierType, float&gt; GetBaseModifiersForSubtype(GlyphSubtype subtype)
        {
            if (_subtypeBaseModifiers.TryGetValue(subtype, out Dictionary&lt;GlyphModifierType, float&gt; modifiers))
            {
                // Return a new dictionary to prevent external modification of static data
                return new Dictionary&lt;GlyphModifierType, float&gt;(modifiers);
            }
            return new Dictionary&lt;GlyphModifierType, float&gt;(); // Empty if no specific modifiers
        }
    }

    /// &lt;summary&gt;
    /// The authoritative database for a world's unique Glyph Symbol to Concept mapping.
    /// This is generated once per world seed.
    /// (TDD 15.2)
    /// &lt;/summary&gt;
    public class WorldGlyphMap
    {
        // ... (existing fields) ...

        public WorldGlyphMap(int worldSeed, int glyphCount)
        {
            GenerateWorldGlyphMap(worldSeed, glyphCount);
            GD.Print($&quot;WorldGlyphMap: Generated {AllWorldGlyphs.Count} glyph definitions for world seed {worldSeed}.&quot;);
        }

        private void GenerateWorldGlyphMap(int worldSeed, int glyphCount)
        {
            Random rand = new Random(worldSeed);

            List&lt;string&gt; selectedSymbols = GlyphSymbols.SelectWorldSymbols(worldSeed, glyphCount);
            List&lt;GlyphConcept&gt; availableConcepts = Enum.GetValues(typeof(GlyphConcept))
                                                        .Cast&lt;GlyphConcept&gt;()
                                                        .Where(c =&gt; c != GlyphConcept.None)
                                                        .ToList();

            // ... (shuffle concepts) ...

            for (int i = 0; i &lt; selectedSymbols.Count; i++)
            {
                string symbol = selectedSymbols[i];
                GlyphConcept concept = availableConcepts[i % availableConcepts.Count];

                // --- NEW: Procedurally assign subtype and modifiers (TDD 15.4) ---
                List&lt;GlyphSubtype&gt; possibleSubtypes = GlyphSubtypeData.GetSubtypesForConcept(concept);
                GlyphSubtype assignedSubtype = possibleSubtypes.Count &gt; 0 ? possibleSubtypes[rand.Next(possibleSubtypes.Count)] : GlyphSubtype.Basic;

                Dictionary&lt;GlyphModifierType, float&gt; baseModifiers = GlyphSubtypeData.GetBaseModifiersForSubtype(assignedSubtype);

                // Further randomize modifiers slightly (e.g., +/- 10%)
                Dictionary&lt;GlyphModifierType, float&gt; finalModifiers = new Dictionary&lt;GlyphModifierType, float&gt;();
                foreach (var kvp in baseModifiers)
                {
                    float variance = (float)(rand.NextDouble() * 0.2 - 0.1); // -0.1 to +0.1
                    finalModifiers.Add(kvp.Key, kvp.Value * (1.0f + variance));
                }
                // --- END NEW ---

                WorldGlyphDefinition def = new WorldGlyphDefinition(symbol, concept, assignedSubtype, finalModifiers); // Pass new data
                _symbolToDefinition.Add(symbol, def);
                if (!_conceptToDefinition.ContainsKey(concept))
                {
                    _conceptToDefinition.Add(concept, def);
                }
            }
        }

        // ... (GetDefinitionBySymbol, GetDefinitionByConcept methods) ...
    }
}
</code></pre>
<p><strong>Explanation of Changes:</strong></p>
<ul>
<li><strong><code>GlyphSubtypeData</code></strong>: A new static class that acts as a lookup table for:<ul>
<li>Which <code>GlyphSubtype</code>s are possible for each <code>GlyphConcept</code>.</li>
<li>The base numerical <code>Modifiers</code> for each <code>GlyphSubtype</code>. This data is static and pre-defined, not procedurally generated.</li>
</ul>
</li>
<li><strong><code>GenerateWorldGlyphMap()</code></strong>:<ul>
<li>Now, after assigning a <code>Concept</code> to a <code>Symbol</code>, it retrieves the <code>possibleSubtypes</code> for that <code>Concept</code> from <code>GlyphSubtypeData</code>.</li>
<li>It randomly selects one <code>assignedSubtype</code> from the possibilities.</li>
<li>It gets the <code>baseModifiers</code> for that <code>assignedSubtype</code>.</li>
<li>It then applies a small random <code>variance</code> to these modifiers, ensuring even more uniqueness per world.</li>
<li>Finally, it creates the <code>WorldGlyphDefinition</code> with the <code>assignedSubtype</code> and <code>finalModifiers</code>.</li>
</ul>
</li>
</ul>
<h3 id="5-testing-subtype-generation">5. Testing Subtype Generation</h3>
<ol>
<li>Save all C# and GDScript files.</li>
<li>Run <code>Main.tscn</code>.</li>
<li>Load <code>Gameplay.tscn</code>.</li>
<li>In the Output console, you should now see the <code>WorldGlyphMap</code> initialization printing the generated glyphs with their assigned subtypes and modified values.</li>
</ol>
<pre><code>...
--- Generated World Glyphs ---
Symbol: 'symbol_leaf' -&gt; Concept: Bloom, Subtype: HealingGrowth (Mods: HealingAmount: 15.4, Duration: 3.3, Radius: 43.1)
Symbol: 'symbol_cross' -&gt; Concept: Consume, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
Symbol: 'symbol_spiral' -&gt; Concept: Pulse, Subtype: Shockwave (Mods: DamageMultiplier: 0.8, Radius: 79.9, Speed: 0.5)
Symbol: 'symbol_pentagon' -&gt; Concept: Veil, Subtype: ShadowBlend (Mods: Duration: 12.5, StabilityCost: 0.0)
Symbol: 'symbol_hand' -&gt; Concept: Chain, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
Symbol: 'symbol_triangle' -&gt; Concept: Echo, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
Symbol: 'symbol_sun' -&gt; Concept: Fracture, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
Symbol: 'symbol_river' -&gt; Concept: Shape, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
Symbol: 'symbol_dot' -&gt; Concept: Project, Subtype: ChakraBeam (Mods: DamageMultiplier: 1.4, Range: 181.9, StabilityCost: 0.2)
Symbol: 'symbol_wave' -&gt; Concept: Bind, Subtype: Basic (Mods: DamageMultiplier: 1.0, Range: 100.0)
------------------------------
...
</code></pre>
<p>Notice how <code>symbol_leaf</code> (Bloom) got <code>HealingGrowth</code> with slightly varied modifiers, <code>symbol_spiral</code> (Pulse) got <code>Shockwave</code>, etc. This demonstrates the procedural assignment of subtypes and modifiers, bringing the GDD's vision of unique magic per world to life.</p>
<h3 id="summary">Summary</h3>
<p>You have successfully implemented <strong>Subtypes &amp; Modifiers</strong> for Sigilborne's glyph system, expanding <code>WorldGlyphDefinition</code> to include procedural subtypes and numerical modifiers. By defining <code>GlyphSubtypeData</code> and enhancing <code>WorldGlyphMap</code> to randomly assign subtypes and vary their parameters based on the world seed, you've introduced deep nuance and replayability to each glyph's effect, strictly adhering to TDD 15.4's specifications. This crucial step ensures that every <code>Bloom</code> is not just <code>Bloom</code>, but a unique <code>Toxic Bloom</code> or <code>Healing Growth</code> with distinct properties, making each world's magic truly unique.</p>
<h3 id="next-steps">Next Steps</h3>
<p>The next chapter will focus on <strong>Glyph Acquisition</strong>, detailing how players learn new glyphs through various in-world methods like interacting with teachers, finding scrolls, and observing NPCs, and how these actions update their <code>PlayerGlyphKnowledgeSystem</code>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "navigation.expand", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>